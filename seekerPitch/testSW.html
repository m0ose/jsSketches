
<html>
  <head>
      <meta charset=“UTF-8”>

  </head>

  <script type="module">
    import './serviceWorkerInstaller.js'

    const responseIntercepted = await fetch(
      './AWFImageTiles/TreeHouse/64/13/1633465647000'
    )
    const intercepted = await responseIntercepted.text()
    const interceptedJSON = JSON.parse(intercepted)
    console.log('intercepted AWF ', interceptedJSON)
    const html = interceptedJSON.map(v=>`<span onClick=setIframe("${v.url}")>#</span>`).join('\n')
    document.getElementById('status').innerHTML += `<div>Full size: ${html}</div>`
    // try normal request
    const response = await fetch(
      'https://proxy.acequia.io/proxy?url=https://node.redfish.com/Documents/cody/timeLapse/images/TreeHouse/2021/278/16'
    )
    console.log(response)

    window.setIframe = function(url){
      document.getElementById('preview').src = url
    }
    const responseInterceptedThumb = await fetch(
      './AWFThumbnailTiles/Axis-WolfMtn2/64/13/1633465647000'
    )
    const interceptedThumb = await responseInterceptedThumb.text()
    const interceptedThumbJSON = JSON.parse(interceptedThumb)
    console.log('intercepted AWF Thumb', interceptedThumbJSON)
    const htmlThumb = interceptedThumbJSON.map(v=>`<span onClick=setIframe("${v.url}")>&#x1F60a;</span>`).join('\n')
    document.getElementById('status').innerHTML += `<div>thumbnail ${htmlThumb}</div>`
  </script>
  <body>
    <div id="status" style="cursor: pointer;"></div>
    <div id="container"></div>
    <img width=400px height=300px id='preview'></img>
  </body>
</html>
